<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>中心缩放</title>
    <link rel="shortcut icon" href="img/ccc.ico" />
    <link rel="icon" href="img/ccc.ico" />
    <style>
        .img-wrap {
            position: fixed;
            top: 25px;
            left: 20px;
            user-select: none;
            transform-origin: center;
            transition: transform 300ms;
        }

        .img-wrap:before {
            content: "";
            position: absolute;
            top: 150px;
            left: 150px;
            width: 4px;
            height: 4px;
            border-radius: 4px;
            background: #f00;
            transform: translate(-50%, -50%);
        }

        .img-wrap:after {
            content: "";
            position: absolute;
            top: 50px;
            left: 250px;
            width: 4px;
            height: 4px;
            border-radius: 4px;
            background: #00f;
            transform: translate(-50%, -50%);
        }

        img {
            display: block;
        }
    </style>
</head>

<body>
    <p>以蓝点为中心放大缩小</p>
    <div class="img-wrap">
        <img src="./img/scale.png" alt="scale">
    </div>
    <script>
        var tar = document.querySelectorAll(".img-wrap")[0];
        var l = window.innerWidth/2-189;
        var t = window.innerHeight/2-234;
        var s = 1;
        tar.style.transform = `translate(${l}px,${t}px) scale(${s})`;

        /**
         * cen 为红点位置
         * point 为蓝点位置
         */
        function toScale(scale) {
            var cenX = 150;
            var cenY = 150;
            var pointX = 250;
            var pointY = 50;

            // 距离等于 cen - point
            var disX = cenX - pointX;
            var disY = cenY - pointY;


            // 新的距离
            var newDisX = disX*scale
            var newDisY = disY*scale

            // 需要移动的距离
            var moveX = newDisX-disX;
            var moveY = newDisY-disY;

            tar.style.transform = `translate(${l+moveX}px,${t+moveY}px) scale(${scale})`;

        }

        document.addEventListener("click",function(){
            toScale(Math.random()*5);
        });
    </script>
</body>

</html>