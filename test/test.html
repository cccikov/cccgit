<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>测试</title>
    <script type="text/javascript">
        var inner;
        function fn(num){
            if(!inner){
                inner = function(){
                    console.log(num);
                }
            }else{
                inner();
            }
        }

        fn(0);
        fn(1); // 0
        fn(2); // 0
        fn(3); // 0
        // 为什么这里的inner读不出变化的num呢


        var a = 10;
        function fn2(){
            console.log(a);
        }
        fn2(); // 10
        a = 20;
        fn2(); // 20
        // 为什么这里的fn2却可以读出变化的a
    </script>
</head>

<body>
    假设fn(0)执行的时候函数里面的环境叫做 环境1 , 在环境1里面定义了inner
    fn(1)执行的时候环境函数里面的叫做 环境2 , 执行环境1的inner , 所以直接读取环境1的num

    fn(0), fn(1) 运行时的环境都是全局执行环境下, 也是和fn2两次运行的环境一样

    至于fn2 , 由于一直都是在全局执行环境下 , 所以永远都是读取a

</body>

</html>